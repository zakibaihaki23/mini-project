{"remainingRequest":"/Users/tb/mini-project/node_modules/babel-loader/lib/index.js!/Users/tb/mini-project/node_modules/eslint-loader/index.js??ref--13-0!/Users/tb/mini-project/src/store/auth.js","dependencies":[{"path":"/Users/tb/mini-project/src/store/auth.js","mtime":1614847437933},{"path":"/Users/tb/mini-project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tb/mini-project/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tb/mini-project/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy90Yi9taW5pLXByb2plY3Qvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiB7CiAgICB0b2tlbjogbnVsbCwKICAgIHVzZXI6IG51bGwKICB9LAogIGdldHRlcnM6IHsKICAgIGF1dGhlbnRpY2F0ZWQ6IGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZWQoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnRva2VuICYmIHN0YXRlLnVzZXI7CiAgICB9LAogICAgdXNlcjogZnVuY3Rpb24gdXNlcihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudXNlcjsKICAgIH0KICB9LAogIG11dGF0aW9uczogewogICAgU0VUX1RPS0VOOiBmdW5jdGlvbiBTRVRfVE9LRU4oc3RhdGUsIHRva2VuKSB7CiAgICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgICB9LAogICAgU0VUX1VTRVI6IGZ1bmN0aW9uIFNFVF9VU0VSKHN0YXRlLCB1c2VyKSB7CiAgICAgIHN0YXRlLnVzZXIgPSB1c2VyOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgc2lnbkluOiBmdW5jdGlvbiBzaWduSW4oX3JlZiwgY3JlZGVudGlhbHMpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgZGlzcGF0Y2gsIHJlc3BvbnNlLCB1c2VyOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRpc3BhdGNoID0gX3JlZi5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJ3YxL2F1dGgnLCBjcmVkZW50aWFscyk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHVzZXIgPSByZXNwb25zZS5kYXRhLmRhdGEudXNlcjsgLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXInLCB1c2VyKQogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codXNlcikKCiAgICAgICAgICAgICAgICBkaXNwYXRjaCgndXNlcicsIHVzZXIpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgZGlzcGF0Y2goJ2F0dGVtcHQnLCByZXNwb25zZS5kYXRhLmRhdGEudG9rZW4pKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHVzZXI6IGZ1bmN0aW9uIHVzZXIoX3JlZjIsIF91c2VyKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBjb21taXQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgICAgICAgICAgICAgIGNvbW1pdCgnU0VUX1VTRVInLCBfdXNlcik7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGF0dGVtcHQ6IGZ1bmN0aW9uIGF0dGVtcHQoX3JlZjMsIHRva2VuKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciBjb21taXQsIHN0YXRlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb21taXQgPSBfcmVmMy5jb21taXQsIHN0YXRlID0gX3JlZjMuc3RhdGU7CgogICAgICAgICAgICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgICAgICAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgdG9rZW4pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChzdGF0ZS50b2tlbikgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2lnbk91dDogZnVuY3Rpb24gc2lnbk91dChfcmVmNCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0OwogICAgICByZXR1cm4gYXhpb3MucG9zdCgnYXV0aC9zaWduSW4nKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsIG51bGwpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/tb/mini-project/src/store/auth.js"],"names":["axios","namespaced","state","token","user","getters","authenticated","mutations","SET_TOKEN","SET_USER","actions","signIn","credentials","dispatch","post","response","data","commit","attempt","signOut","then"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,eAAe;AACbC,EAAAA,UAAU,EAAE,IADC;AAEbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,KAAK,EAAE,IADF;AAELC,IAAAA,IAAI,EAAE;AAFD,GAFM;AAMbC,EAAAA,OAAO,EAAE;AACPC,IAAAA,aADO,yBACOJ,KADP,EACc;AACnB,aAAOA,KAAK,CAACC,KAAN,IAAeD,KAAK,CAACE,IAA5B;AACD,KAHM;AAIPA,IAAAA,IAJO,gBAIFF,KAJE,EAIK;AACV,aAAOA,KAAK,CAACE,IAAb;AACD;AANM,GANI;AAcbG,EAAAA,SAAS,EAAE;AACTC,IAAAA,SADS,qBACCN,KADD,EACQC,KADR,EACe;AACtBD,MAAAA,KAAK,CAACC,KAAN,GAAcA,KAAd;AACD,KAHQ;AAITM,IAAAA,QAJS,oBAIAP,KAJA,EAIOE,IAJP,EAIa;AACpBF,MAAAA,KAAK,CAACE,IAAN,GAAaA,IAAb;AACD;AANQ,GAdE;AAsBbM,EAAAA,OAAO,EAAE;AACDC,IAAAA,MADC,wBACoBC,WADpB,EACiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAzBC,gBAAAA,QAAyB,QAAzBA,QAAyB;AAAA;AAAA,uBACjBb,KAAK,CAACc,IAAN,CAAW,SAAX,EAAsBF,WAAtB,CADiB;;AAAA;AAClCG,gBAAAA,QADkC;AAGhCX,gBAAAA,IAHgC,GAGzBW,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBZ,IAHM,EAItC;AACA;;AACAS,gBAAAA,QAAQ,CAAC,MAAD,EAAST,IAAT,CAAR;AANsC,iDAQ/BS,QAAQ,CAAC,SAAD,EAAYE,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBb,KAA/B,CARuB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASvC,KAVM;AAWDC,IAAAA,IAXC,uBAWgBA,KAXhB,EAWsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAhBa,gBAAAA,MAAgB,SAAhBA,MAAgB;AAC3BA,gBAAAA,MAAM,CAAC,UAAD,EAAab,KAAb,CAAN;;AAD2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAE5B,KAbM;AAcDc,IAAAA,OAdC,0BAc0Bf,KAd1B,EAciC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAxBc,gBAAAA,MAAwB,SAAxBA,MAAwB,EAAhBf,KAAgB,SAAhBA,KAAgB;;AACtC,oBAAIC,KAAJ,EAAW;AACTc,kBAAAA,MAAM,CAAC,WAAD,EAAcd,KAAd,CAAN;AACD;;AAHqC,oBAIjCD,KAAK,CAACC,KAJ2B;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOvC,KArBM;AAsBPgB,IAAAA,OAtBO,0BAsBa;AAAA,UAAVF,MAAU,SAAVA,MAAU;AAClB,aAAOjB,KAAK,CAACc,IAAN,CAAW,aAAX,EAA0BM,IAA1B,CAA+B,YAAM;AAC1CH,QAAAA,MAAM,CAAC,WAAD,EAAc,IAAd,CAAN;AACD,OAFM,CAAP;AAGD;AA1BM;AAtBI,CAAf","sourcesContent":["import axios from 'axios'\nexport default {\n  namespaced: true,\n  state: {\n    token: null,\n    user: null,\n  },\n  getters: {\n    authenticated(state) {\n      return state.token && state.user\n    },\n    user(state) {\n      return state.user\n    },\n  },\n  mutations: {\n    SET_TOKEN(state, token) {\n      state.token = token\n    },\n    SET_USER(state, user) {\n      state.user = user\n    },\n  },\n  actions: {\n    async signIn({ dispatch }, credentials) {\n      let response = await axios.post('v1/auth', credentials)\n\n      const user = response.data.data.user\n      // localStorage.setItem('user', user)\n      // console.log(user)\n      dispatch('user', user)\n\n      return dispatch('attempt', response.data.data.token)\n    },\n    async user({ commit }, user) {\n      commit('SET_USER', user)\n    },\n    async attempt({ commit, state }, token) {\n      if (token) {\n        commit('SET_TOKEN', token)\n      }\n      if (!state.token) {\n        return\n      }\n    },\n    signOut({ commit }) {\n      return axios.post('auth/signIn').then(() => {\n        commit('SET_TOKEN', null)\n      })\n    },\n  },\n}\n"]}]}