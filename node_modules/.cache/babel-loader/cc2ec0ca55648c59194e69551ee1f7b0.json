{"remainingRequest":"/Users/tb/mini-project/node_modules/babel-loader/lib/index.js!/Users/tb/mini-project/node_modules/eslint-loader/index.js??ref--13-0!/Users/tb/mini-project/src/store/auth.js","dependencies":[{"path":"/Users/tb/mini-project/src/store/auth.js","mtime":1614842895932},{"path":"/Users/tb/mini-project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tb/mini-project/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tb/mini-project/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy90Yi9taW5pLXByb2plY3Qvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiB7CiAgICB0b2tlbjogbnVsbCwKICAgIHVzZXI6IG51bGwKICB9LAogIGdldHRlcnM6IHsKICAgIGF1dGhlbnRpY2F0ZWQ6IGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZWQoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnRva2VuOwogICAgfSwKICAgIHVzZXI6IGZ1bmN0aW9uIHVzZXIoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnVzZXI7CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogICAgfSwKICAgIFNFVF9VU0VSOiBmdW5jdGlvbiBTRVRfVVNFUihzdGF0ZSwgdXNlcikgewogICAgICBzdGF0ZS51c2VyID0gdXNlcjsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIHNpZ25JbjogZnVuY3Rpb24gc2lnbkluKF9yZWYsIGNyZWRlbnRpYWxzKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGRpc3BhdGNoLCByZXNwb25zZSwgdXNlcjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkaXNwYXRjaCA9IF9yZWYuZGlzcGF0Y2g7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCd2MS9hdXRoJywgY3JlZGVudGlhbHMpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICB1c2VyID0gcmVzcG9uc2UuZGF0YS5kYXRhLnVzZXI7IC8vIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyJywgdXNlcikKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHVzZXIpCgogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ3VzZXInLCB1c2VyKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGRpc3BhdGNoKCdhdHRlbXB0JywgcmVzcG9uc2UuZGF0YS5kYXRhLnRva2VuKSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICB1c2VyOiBmdW5jdGlvbiB1c2VyKF9yZWYyLCBfdXNlcikgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgY29tbWl0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICAgICAgICAgICAgICBjb21taXQoJ1NFVF9VU0VSJywgX3VzZXIpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBhdHRlbXB0OiBmdW5jdGlvbiBhdHRlbXB0KF9yZWYzLCB0b2tlbikgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgY29tbWl0LCBzdGF0ZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjMuY29tbWl0LCBzdGF0ZSA9IF9yZWYzLnN0YXRlOwoKICAgICAgICAgICAgICAgIGlmICh0b2tlbikgewogICAgICAgICAgICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsIHRva2VuKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoc3RhdGUudG9rZW4pIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNpZ25PdXQ6IGZ1bmN0aW9uIHNpZ25PdXQoX3JlZjQpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWY0LmNvbW1pdDsKICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJ2F1dGgvc2lnbkluJykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCBudWxsKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/tb/mini-project/src/store/auth.js"],"names":["axios","namespaced","state","token","user","getters","authenticated","mutations","SET_TOKEN","SET_USER","actions","signIn","credentials","dispatch","post","response","data","commit","attempt","signOut","then"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,eAAe;AACbC,EAAAA,UAAU,EAAE,IADC;AAEbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,KAAK,EAAE,IADF;AAELC,IAAAA,IAAI,EAAE;AAFD,GAFM;AAMbC,EAAAA,OAAO,EAAE;AACPC,IAAAA,aADO,yBACOJ,KADP,EACc;AACnB,aAAOA,KAAK,CAACC,KAAb;AACD,KAHM;AAIPC,IAAAA,IAJO,gBAIFF,KAJE,EAIK;AACV,aAAOA,KAAK,CAACE,IAAb;AACD;AANM,GANI;AAcbG,EAAAA,SAAS,EAAE;AACTC,IAAAA,SADS,qBACCN,KADD,EACQC,KADR,EACe;AACtBD,MAAAA,KAAK,CAACC,KAAN,GAAcA,KAAd;AACD,KAHQ;AAITM,IAAAA,QAJS,oBAIAP,KAJA,EAIOE,IAJP,EAIa;AACpBF,MAAAA,KAAK,CAACE,IAAN,GAAaA,IAAb;AACD;AANQ,GAdE;AAsBbM,EAAAA,OAAO,EAAE;AACDC,IAAAA,MADC,wBACoBC,WADpB,EACiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAzBC,gBAAAA,QAAyB,QAAzBA,QAAyB;AAAA;AAAA,uBACjBb,KAAK,CAACc,IAAN,CAAW,SAAX,EAAsBF,WAAtB,CADiB;;AAAA;AAClCG,gBAAAA,QADkC;AAGhCX,gBAAAA,IAHgC,GAGzBW,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBZ,IAHM,EAItC;AACA;;AACAS,gBAAAA,QAAQ,CAAC,MAAD,EAAST,IAAT,CAAR;AANsC,iDAQ/BS,QAAQ,CAAC,SAAD,EAAYE,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBb,KAA/B,CARuB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASvC,KAVM;AAWDC,IAAAA,IAXC,uBAWgBA,KAXhB,EAWsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAhBa,gBAAAA,MAAgB,SAAhBA,MAAgB;AAC3BA,gBAAAA,MAAM,CAAC,UAAD,EAAab,KAAb,CAAN;;AAD2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAE5B,KAbM;AAcDc,IAAAA,OAdC,0BAc0Bf,KAd1B,EAciC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAxBc,gBAAAA,MAAwB,SAAxBA,MAAwB,EAAhBf,KAAgB,SAAhBA,KAAgB;;AACtC,oBAAIC,KAAJ,EAAW;AACTc,kBAAAA,MAAM,CAAC,WAAD,EAAcd,KAAd,CAAN;AACD;;AAHqC,oBAIjCD,KAAK,CAACC,KAJ2B;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOvC,KArBM;AAsBPgB,IAAAA,OAtBO,0BAsBa;AAAA,UAAVF,MAAU,SAAVA,MAAU;AAClB,aAAOjB,KAAK,CAACc,IAAN,CAAW,aAAX,EAA0BM,IAA1B,CAA+B,YAAM;AAC1CH,QAAAA,MAAM,CAAC,WAAD,EAAc,IAAd,CAAN;AACD,OAFM,CAAP;AAGD;AA1BM;AAtBI,CAAf","sourcesContent":["import axios from 'axios'\nexport default {\n  namespaced: true,\n  state: {\n    token: null,\n    user: null,\n  },\n  getters: {\n    authenticated(state) {\n      return state.token\n    },\n    user(state) {\n      return state.user\n    },\n  },\n  mutations: {\n    SET_TOKEN(state, token) {\n      state.token = token\n    },\n    SET_USER(state, user) {\n      state.user = user\n    },\n  },\n  actions: {\n    async signIn({ dispatch }, credentials) {\n      let response = await axios.post('v1/auth', credentials)\n\n      const user = response.data.data.user\n      // localStorage.setItem('user', user)\n      // console.log(user)\n      dispatch('user', user)\n\n      return dispatch('attempt', response.data.data.token)\n    },\n    async user({ commit }, user) {\n      commit('SET_USER', user)\n    },\n    async attempt({ commit, state }, token) {\n      if (token) {\n        commit('SET_TOKEN', token)\n      }\n      if (!state.token) {\n        return\n      }\n    },\n    signOut({ commit }) {\n      return axios.post('auth/signIn').then(() => {\n        commit('SET_TOKEN', null)\n      })\n    },\n  },\n}\n"]}]}